<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/herald/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/herald/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/herald/css/styles.css?1607117952253211352">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0">
<meta property="og:title" content="Herald envelope payload">
<meta name="author" content="Herald Authors">
<meta property="og:locale" content="en_US">
<meta name="description" content="Our common header for sharing contact tracing data">
<meta property="og:description" content="Our common header for sharing contact tracing data">
<link rel="canonical" href="https://vmware.github.io/herald/payload/envelope">
<meta property="og:url" content="https://vmware.github.io/herald/payload/envelope">
<meta property="og:site_name" content="Herald Project">
<script type="application/ld+json">
{"description":"Our common header for sharing contact tracing data","url":"https://vmware.github.io/herald/payload/envelope","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://vmware.github.io/herald/herald/img/herald.png"},"name":"Herald Authors"},"headline":"Herald envelope payload","author":{"@type":"Person","name":"Herald Authors"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <title>Herald Project Docs - Herald envelope payload</title>



<body id="docs">
  <div class="container-fluid site-outer-container">
    <div class="site-container">
      <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/herald/" aria-label="Herald homepage"><img src="/herald/img/herald.png" class="logo" alt="Homepage"></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/herald/" title="Herald Project">Home</a></li>
            <li class="blog"><a href="/herald/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/herald/community" title="Community">Community</a></li>
            <li class="docs"><a href="/herald/docs">Documentation</a></li>
            <li class="efficacy"><a href="/herald/efficacy" title="Efficacy Paper">Efficacy Paper</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>
      <div class="post-single-hero bg-color-med-blue">
        <div class="section">
            <div class="section-content">
              <h1>Herald envelope payload</h1>
            </div>
        </div>
      </div>
        <div class="post-single-body">
        <div class="section section-card">
            <div class="section-content pt-4 pb-0">
              <div class="row">
                <div class="col-md-3">
                 <div class="row">
    <div class="dropdown mb-2">
        
            <span></span>
        
    </div>
</div>
                <nav class="navigation">
  <!-- If new pages are added to the site and the TOC needs to be updated, it
  can be overridden, using toc-mapping.yml -->
  

  
  <h5>Introduction</h5>
  <ul>
    
    <li>
      
        <a href="/herald/docs">Our documentation</a>
      
    </li>
    
  </ul>
  
  <h5>Applications</h5>
  <ul>
    
    <li>
      
        <a href="/herald/applications">Herald Applications</a>
      
    </li>
    
    <li>
      
        <a href="/herald/applications/ct">Contact Tracing</a>
      
    </li>
    
    <li>
      
        <a href="/herald/applications/p2p">Device to Device</a>
      
    </li>
    
    <li>
      
        <a href="/herald/applications/mesh">Bluetooth Mesh Gateways</a>
      
    </li>
    
  </ul>
  
  <h5>Herald Protocol</h5>
  <ul>
    
    <li>
      
        <a href="/herald/protocol/">About our protocol</a>
      
    </li>
    
    <li>
      
        <a href="/herald/protocol/custom">Non contact tracing uses</a>
      
    </li>
    
  </ul>
  
  <h5>Design Guide</h5>
  <ul>
    
    <li>
      
        <a href="/herald/design/">Herald's Design</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/core">Core philosophy</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/data">Data used</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/protocol">Protocol lifecycle</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/summary">Design summary</a>
      
    </li>
    
  </ul>
  
  <h5>Herald Payloads</h5>
  <ul>
    
    <li>
      
        <a href="/herald/payload">About Payloads</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/envelope">Herald Envelope Header</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/interop">Interoperability</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/common">Herald Common CT Inner Header</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/simple">Herald Simple Inner Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/secured">Herald Secured Inner Payload (Draft)</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/beacon">Herald Beacon Payload (Draft)</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/inner">Herald-compatible Inner Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/outer">Custom outer &amp; inner payloads</a>
      
    </li>
    
  </ul>
  
  <h5>Development &amp; Integration Guide</h5>
  <ul>
    
    <li>
      
        <a href="/herald/guide/">How to integrate</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/code">About the code</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/add">Import Herald</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/ios">iOS app guide</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/android">Android app guide</a>
      
    </li>
    
  </ul>
  
  <h5>About Contact Tracing</h5>
  <ul>
    
    <li>
      
        <a href="/herald/background">What is Contact Tracing?</a>
      
    </li>
    
    <li>
      
        <a href="/herald/background/glossary">Glossary of terms</a>
      
    </li>
    
    <li>
      
        <a href="/herald/background/approaches">Technology Approaches</a>
      
    </li>
    
  </ul>
  
  <h5>Bluetooth Research</h5>
  <ul>
    
    <li>
      
        <a href="/herald/bluetooth">Our Research</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/hardware">Hardware Issues</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/os">Operating System Issues</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/crowding">Crowding</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/distance">Distance Estimation</a>
      
    </li>
    
  </ul>
  
  <h5>Formal Specifications</h5>
  <ul>
    
    <li>
      
        <a href="/herald/specs">List and status</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/protocol">Herald Protocol</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-simple">Simple Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-secured">Secured Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-interop">International Interoperability</a>
      
    </li>
    
  </ul>
  
</nav>

                </div>
                <div class="col-md-8 offset-md-1">
                

  

                <h1 id="herald-envelope-header">Herald Envelope Header</h1>

<p>Each national contact tracing team has two competing aims when it comes to payload:-</p>

<ul>
  <li>Provide the unique information necessary / permissable under their law to enable contact tracing</li>
  <li>Ensure where possible their payload allows for international interoperability</li>
</ul>

<p>In the Herald Envelope payload for Contact Tracing we provide the outer payload to allow for international
interoperability but leave the inner payload - the data payload for that country - to the national team
to implement.</p>

<p><img src="/herald/images/PayloadEnvelope.png" alt="Herald Envelope Header"></p>

<p>We recommend each country use the Envelope protocol and embed their payload as an <a href="/herald/payload/inner">Inner Payload</a>,
but thereâ€™s nothing stopping individual groups from creating their own <a href="/herald/payload/outer">Outer payload</a> if they wish.
Doing so though will prevent international interoperability between contact tracing apps and devices.</p>

<h2 id="what-does-the-outer-payload-provide">What does the outer payload provide?</h2>

<p>The outer payloads allow for certain standard data to be passed.</p>

<p>Note: All numbers are Big Endian (network order).</p>

<ul>
  <li>Read ID payload
    <ul>
      <li>Payload identifier and version - 4 byte unsigned integer - 0x00 for Herald envelope payload V1.0, up to 0x07, wrapping around for further versions (not part of the signature)</li>
      <li>Inner payload data - See the <a href="/herald/payload/common">common contact tracing header</a> for options for this content for contact tracing, or custom use cases</li>
    </ul>
  </li>
  <li>Calling card / ID write payload
    <ul>
      <li>Same content as for Read ID payload</li>
    </ul>
  </li>
  <li>Calling card / nearby devices read payload - most recent devices only
    <ul>
      <li>Multiple payloads, consisting of:-
        <ul>
          <li>Payload type - 1 byte integer. 0 = direct read, 1 = direct write, other values reserved for future use</li>
          <li>Received time - 4 byte signed integer, unix epoch seconds when the echange was observed by the device</li>
          <li>Payload data - as per individual read/write payloads, above. You MUST either configure a fixed length value in the Herald outer payload, or provide your own custom parser to split each shared device payload.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Calling card / nearby devices write payload (disabled by default in the Herald protocol)
    <ul>
      <li>Exactly the same as for calling card read payload - most recent devices only</li>
    </ul>
  </li>
</ul>

<h2 id="reserved-fields">Reserved fields</h2>

<p>Any protocol and version identify ending in 0-7 (E.g. 0x00-0x07, 0x10-0x17, 0x20-0x27) is reserved
for the use of the Herald Project. You are free to use any other values.</p>

<p>You do not need to register your protocol IDs with us so long as you use a different Bluetooth
service UUID and characteristic UUID. If you wish to provide an extension to Herald, as we
have done for our <a href="/herald/payload/beacon">beacon</a> payload, then please do let us know what
range you are using.</p>

<h2 id="international-interoperability">International Interoperability</h2>

<p>The envelope header is the cornerstone of international interoperability. Please see the <a href="/herald/payload/interop">Interoperability page</a> for full details</p>

                </div>
              </div>
            </div>
        </div>
        </div>
      <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/herald/docs" class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-5 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                    <li>
                      
                      <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://twitter.com/HeraldBluetooth">Twitter</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://herald-bluetooth.slack.com/">Slack</a>
</li>
                    
                    <li>
                      
                      <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                      
                      <a href="feed.xml">RSS</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://github.com/vmware/?q=herald">GitHub</a>
</li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-7 text-center text-md-right">
              <a href="/herald/" aria-label="Herald homepage"><img src="/herald/img/herald.png" class="logo" alt="Homepage"></a>
            </div>
        </div>
        <div class="row align-items-center">
          <div class="col copyright text-center text-md-right mt-4">
            Â© 2020 Herald Authors.
            <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img src="/herald/img/vm-logo.png" alt="VMware logo"></a>
          </div>
        </div>
    </div>
</footer>


<!-- JS -->
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/herald/js/jquery.matchHeight.js?1607117952253211352"></script>
<script src="/herald/js/scripts.js?1607117952253211352"></script>
    </div>
  </div>
</body>

</html>
